<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>ailbe's site!</title> 
    <link rel="stylesheet" href="style.css"> 
    <link rel="icon" type="image/x-icon" href="favicon.ico" > 
</head>
<body>
    <div class="layout">

        <div class="sidebar">
            <h2>navigation</h2>
            <ul>
                <li><a href="index.html">home</a></li>
                <li><a href="about.html">about me</a></li>
                    <div id="now-playing">
                      <em>loading…</em>
                    </div>
                </li>
            </ul>
        </div>

        <div class="box">
            <h1>welcome to my little website! :3</h1>
            <p>my name's ailbe, and welcome to my website! <s>this is a very basic HTML page...</s> not that basic anymore!<p>
            <ul>
                <li><s>add some more pages</s> done!</li>
                <li><s>add some css</s> done!</li>
                <li><s>make it look nice!</s> kinda...</li>
                <li>there's a todo list now!! <a href="todo.html">here</a>!</li>
            </ul>

            <p><a href="about.html">this</a> is a link to a different page!</p>

            <footer>
                <p>this is a heavy wip!!! from october 12th, 2025 :3</p>
                <p>coded with arch and vscodium, with love</p>
            </footer>
        </div>

    </div>
    <script>
        const LASTFM_USER = "itsailbe";
        const LASTFM_API_KEY = "787ec7fec90ad6d3b337dac14204c131";
        const endpoint = `https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${LASTFM_USER}&api_key=${LASTFM_API_KEY}&format=json&limit=1`;
      
        function updateNowPlaying() {
          fetch(endpoint)
            .then(res => res.json())
            .then(data => {
              const track = data.recenttracks.track[0];
              if (!track) {
                document.getElementById("now-playing").innerHTML = "<em>No recent track found.</em>";
                return;
              }
              const artist = track.artist["#text"] || "Unknown Artist";
              const title  = track.name || "Unknown Title";
              const url    = track.url || "#";
              const isNow  = track["@attr"] && track["@attr"].nowplaying === "true";
      
              const html = `
                <div class="track">
                  <a href="${url}" target="_blank">${artist} – ${title}</a>
                  ${ isNow ? '<span class="playing"> listening now</span>' : ''}
                </div>
              `;
              document.getElementById("now-playing").innerHTML = html;
            })
            .catch(err => {
              console.error(err);
              document.getElementById("now-playing").innerHTML = "<em>error loading track info</em>";
            });
        }
      
        updateNowPlaying()
      </script>
      
</body>
